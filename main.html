
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Букмекерская Карусель и Колесо Фортуны</title>
  <meta name="color-scheme" content="dark light">
  <style>
    :root {
      --bg: #121212;
      --surface: #1e1e1e;
      --text: #e8e8e8;
      --muted: #bdbdbd;
      --primary: #3498db;
      --primary-600: #2980b9;
      --accent: #e74c3c;
      --success: #2ecc71;
      --radius: 12px;
      --shadow: 0 2px 10px rgba(0,0,0,.5);
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial,"Apple Color Emoji","Segoe UI Emoji";
      -webkit-font-smoothing:antialiased;
      display:flex; flex-direction:column; align-items:center;
    }
    a{color:inherit}
    img{max-width:100%; display:block}
    button{font:inherit}
    .container{width:min(92%,1200px); margin-inline:auto}

    /* Header / Nav */
    header{position:sticky;top:0;z-index:10;width:100%;background:var(--surface);box-shadow:var(--shadow)}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700;letter-spacing:.3px}
    .brand svg{width:24px;height:24px}
    .links{display:flex;gap:24px}
    .links a{text-decoration:none;opacity:.9}
    .links a:focus-visible,.links a:hover{opacity:1}
    .burger{display:none;background:none;border:0;padding:6px;border-radius:8px;cursor:pointer}
    .burger:focus-visible{outline:2px solid #fff;outline-offset:2px}
    #menu{display:flex;gap:20px}
    @media (max-width:720px){
      .burger{display:inline-flex}
      #menu{display:none;flex-direction:column;padding:10px;background:var(--surface);border-radius:var(--radius)}
      #menu.open{display:flex}
    }

    main{width:100%;display:grid;place-items:center;gap:40px;padding-block:24px}

    /* Carousel */
    .carousel{width:min(92%,1200px);overflow:hidden;position:relative;background:var(--surface);border-radius:var(--radius);box-shadow:var(--shadow)}
    .carousel-track{display:flex;align-items:center;gap:16px;padding:12px;will-change:transform}
    .marquee{display:flex;width:fit-content;animation:scroll 30s linear infinite}
    .carousel:hover .marquee{animation-play-state:paused}
    @media (prefers-reduced-motion:reduce){.marquee{animation:none}}
    @keyframes scroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}
    .slide{flex:0 0 auto;width:clamp(160px,26vw,260px);aspect-ratio:5/3;position:relative;border-radius:10px;overflow:hidden;box-shadow:var(--shadow);cursor:pointer}
    .slide img{width:100%;height:100%;object-fit:cover}
    .slide .label{position:absolute;inset:auto 8px 8px 8px;background:rgba(0,0,0,.45);border-radius:8px;padding:6px 10px;font-weight:700;text-transform:uppercase;letter-spacing:.4px}

    /* Wheel */
    .wheel-section{width:min(92%,700px);display:grid;place-items:center;gap:16px;text-align:center}
    .card{width:100%;background:var(--surface);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
    .wheel-wrap{position:relative;display:grid;place-items:center}
    /* Позиционируем стрелку так, чтобы её наконечник прилегал к кругу */
    .pointer{position:absolute;top:50%;transform:translateY(-50%);width:0;height:0;border-top:18px solid transparent;border-bottom:18px solid transparent;border-right:36px solid var(--accent);right:-36px}
    @media (max-width:560px){.pointer{border-top:14px solid transparent;border-bottom:14px solid transparent;border-right:28px solid var(--accent);right:-28px}}
    canvas{display:block;max-width:100%;height:auto;border-radius:50%;background:#fff;box-shadow:0 0 0 2px rgba(255,255,255,.06) inset}
    .controls{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
    .btn{padding:10px 16px;border:0;border-radius:10px;cursor:pointer;background:var(--primary);color:#fff;transition:transform .08s ease, background .2s}
    .btn:hover{background:var(--primary-600)}
    .btn:active{transform:translateY(1px)}
    .btn[disabled]{background:#666;cursor:not-allowed}
    .result{min-height:1.5em;color:var(--success)}

    footer{margin-block:40px 24px;color:var(--muted);font-size:.9rem}

    /* Modal: Golden Lottery Ticket */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:50}
    .modal.open{display:flex}
    .modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.6)}
    .ticket{
      position:relative;z-index:1;width:min(92vw,520px);padding:22px 20px;border-radius:18px;text-align:center;color:#3b2b00;box-shadow:var(--shadow);
      background:radial-gradient(120% 120% at 10% 10%,#fffbcc,#ffd34e 35%,#caa10e 70%,#9a7a06 100%);
      border:2px solid rgba(255,255,255,.5);
      outline:6px solid rgba(0,0,0,.2);
    }
    .ticket::before,.ticket::after{content:"";position:absolute;top:50%;width:22px;height:22px;background:var(--bg);border-radius:50%;transform:translateY(-50%)}
    .ticket::before{left:-11px}.ticket::after{right:-11px}
    .ticket h2{margin:6px 0 8px;font-size:1.4rem;color:#2b2100;text-shadow:0 1px 0 rgba(255,255,255,.6)}
    .ticket .brand{font-weight:800;letter-spacing:.5px;margin:0 0 8px;font-size:1.1rem}
    .ticket .code{display:inline-block;padding:10px 14px;margin:8px 0 10px;border-radius:12px;background:rgba(255,255,255,.85);border:2px dashed #8f6f00;font-weight:900;letter-spacing:1.2px}
    .ticket .row{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:6px}
    .ticket .cta,.ticket .copy-btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .ticket .cta{background:#1b1b1b;color:#fff;text-decoration:none}
    .ticket .cta:hover{opacity:.95}
    .ticket .copy-btn{background:#fff}
    .ticket .note{margin-top:8px;font-size:.9rem;color:#4e3d00}
    .ticket .close{position:absolute;right:8px;top:8px;background:transparent;border:0;font-size:22px;cursor:pointer}
  </style>
</head>
<body>
  <header>
    <div class="container nav" role="navigation" aria-label="Главная навигация">
      <div class="brand" aria-label="Логотип">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 11h18v2H3zM3 6h18v2H3zM3 16h18v2H3z"/></svg>
        <span>Bet Carousel</span>
      </div>
      <button class="burger" aria-expanded="false" aria-controls="menu" aria-label="Открыть меню" id="burger">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 5h18v2H3zm0 6h18v2H3zm0 6h18v2H3z"/></svg>
      </button>
      <nav id="menu" class="links">
        <a href="#top">Главная</a>
        <a href="#about">О нас</a>
        <a href="#contacts">Контакты</a>
      </nav>
    </div>
  </header>

  <main id="top">
    <!-- Carousel -->
    <section class="carousel" aria-label="Баннеры букмекерских контор">
      <div class="carousel-track">
        <div class="marquee" aria-hidden="true">
          <div class="lane" style="display:flex;gap:16px;padding-right:16px">
            <!-- Повторите баннеры -->
            <article class="slide"><img src="images/banner1.jpg" alt="Bet365"><div class="label">Bet365</div></article>
            <article class="slide"><img src="images/banner2.jpg" alt="Betway"><div class="label">Betway</div></article>
            <article class="slide"><img src="images/banner3.jpg" alt="Betfair"><div class="label">Betfair</div></article>
            <article class="slide"><img src="images/banner4.jpg" alt="888sport"><div class="label">888sport</div></article>
            <article class="slide"><img src="images/banner5.jpg" alt="Unibet"><div class="label">Unibet</div></article>
            <article class="slide"><img src="images/banner6.jpg" alt="Paddy Power"><div class="label">Paddy Power</div></article>
            <article class="slide"><img src="images/banner7.jpg" alt="William Hill"><div class="label">William Hill</div></article>
            <article class="slide"><img src="images/banner8.jpg" alt="Betsson"><div class="label">Betsson</div></article>
          </div>
          <div class="lane" style="display:flex;gap:16px;padding-left:16px">
            <!-- Дубликаты баннеров -->
            <article class="slide"><img src="images/banner1.jpg" alt="Bet365"><div class="label">Bet365</div></article>
            <article class="slide"><img src="images/banner2.jpg" alt="Betway"><div class="label">Betway</div></article>
            <article class="slide"><img src="images/banner3.jpg" alt="Betfair"><div class="label">Betfair</div></article>
            <article class="slide"><img src="images/banner4.jpg" alt="888sport"><div class="label">888sport</div></article>
            <article class="slide"><img src="images/banner5.jpg" alt="Unibet"><div class="label">Unibet</div></article>
            <article class="slide"><img src="images/banner6.jpg" alt="Paddy Power"><div class="label">Paddy Power</div></article>
            <article class="slide"><img src="images/banner7.jpg" alt="William Hill"><div class="label">William Hill</div></article>
            <article class="slide"><img src="images/banner8.jpg" alt="Betsson"><div class="label">Betsson</div></article>
          </div>
        </div>
      </div>
    </section>

    <!-- Wheel -->
    <section class="wheel-section">
      <div class="card">
        <h1 style="margin:0 0 8px">Колесо Фортуны</h1>
        <p style="margin:0 0 14px;color:var(--muted)">Нажми на колесо или кнопку — выпадет случайная БК.</p>
        <div class="wheel-wrap">
          <div class="pointer" aria-hidden="true"></div>
          <canvas id="wheel" width="480" height="480" role="img" aria-label="Колесо фортуны с 8 сегментами"></canvas>
        </div>
        <div class="controls" style="margin-top:12px">
          <button id="spin-btn" class="btn" type="button" aria-live="polite">Крутить</button>
        </div>
        <p id="result" class="result" aria-live="polite"></p>
      </div>
    </section>
  </main>

  <!-- Promo Modal -->
  <div class="modal" id="promoModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-backdrop" data-close></div>
    <div class="ticket" role="document">
      <button class="close" aria-label="Закрыть" data-close>×</button>
      <h2>Ваш золотой билет</h2>
      <p class="brand" id="promoBrand">—</p>
      <div class="code" id="promoCode">GOLD-XXXX</div>
      <div class="row">
        <button class="copy-btn" id="copyCode" type="button">Скопировать</button>
        <a class="cta" id="promoLink" href="#" target="_blank" rel="noopener">Перейти на сайт</a>
      </div>
      <p class="note">Скопируйте промокод и активируйте при регистрации или пополнении на сайте букмекера.</p>
    </div>
  </div>

  <footer class="container" id="contacts">
    © <span id="year"></span> Bet Carousel · <a href="#about" style="text-decoration:underline">О нас</a>
  </footer>

  <script>
    // ===== Header mobile menu =====
    const burger = document.getElementById('burger');
    const menu = document.getElementById('menu');
    burger?.addEventListener('click', () => {
      const open = menu.classList.toggle('open');
      burger.setAttribute('aria-expanded', String(open));
      burger.setAttribute('aria-label', open ? 'Закрыть меню' : 'Открыть меню');
    });

    // ===== Footer year =====
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Wheel of Fortune =====
    const segments = [
      { label: 'Bet365', imageSrc: 'images/seg1.jpg' },
      { label: 'Betway', imageSrc: 'images/seg2.jpg' },
      { label: 'Betfair', imageSrc: 'images/seg3.jpg' },
      { label: '888sport', imageSrc: 'images/seg4.jpg' },
      { label: 'Unibet', imageSrc: 'images/seg5.jpg' },
      { label: 'Paddy Power', imageSrc: 'images/seg6.jpg' },
      { label: 'William Hill', imageSrc: 'images/seg7.jpg' },
      { label: 'Betsson', imageSrc: 'images/seg8.jpg' }
    ];

    const wheel = document.getElementById('wheel');
    const ctx = wheel.getContext('2d');
    const spinBtn = document.getElementById('spin-btn');
    const resultDiv = document.getElementById('result');

    // Promo data (замени URL/коды на свои при интеграции)
    const PROMOS = {
      'Bet365':      { code: 'BET365-GOLD',      url: '#' },
      'Betway':      { code: 'BETWAY-GOLD',      url: '#' },
      'Betfair':     { code: 'BETFAIR-GOLD',     url: '#' },
      '888sport':    { code: '888-GOLD',         url: '#' },
      'Unibet':      { code: 'UNIBET-GOLD',      url: '#' },
      'Paddy Power': { code: 'PADDY-GOLD',       url: '#' },
      'William Hill':{ code: 'WILLIAM-GOLD',     url: '#' },
      'Betsson':     { code: 'BETSSON-GOLD',     url: '#' }
    };

    const modal = document.getElementById('promoModal');
    const promoBrandEl = document.getElementById('promoBrand');
    const promoCodeEl = document.getElementById('promoCode');
    const promoLinkEl = document.getElementById('promoLink');
    const copyBtn = document.getElementById('copyCode');

    function openModalForBrand(brand){
      const data = PROMOS[brand] || { code: 'GOLD-' + Math.random().toString(36).slice(2,6).toUpperCase(), url: '#' };
      promoBrandEl.textContent = brand;
      promoCodeEl.textContent = data.code;
      promoLinkEl.href = data.url;
      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
      document.documentElement.style.overflow = 'hidden';
    }
    function closeModal(){
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
      document.documentElement.style.overflow = '';
    }
    modal.addEventListener('click', (e)=>{ if (e.target.closest('[data-close]')) closeModal(); });
    window.addEventListener('keydown', (e)=>{ if (e.key === 'Escape' && modal.classList.contains('open')) closeModal(); });
    copyBtn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(promoCodeEl.textContent);
        copyBtn.textContent = 'Скопировано!';
        setTimeout(()=>copyBtn.textContent='Скопировать',1200);
      }catch{}
    });

    const total = segments.length;
    const anglePer = (2 * Math.PI) / total;

    let autorun = true;
    let isSpinning = false;
    let currentRotation = 0;
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    function resizeCanvas() {
      const rect = wheel.getBoundingClientRect();
      const size = Math.min(rect.width || 480, 560);
      const dpr = Math.max(1, Math.round(window.devicePixelRatio || 1));
      wheel.width = Math.floor(size * dpr);
      wheel.height = Math.floor(size * dpr);
      wheel.style.width = Math.floor(size) + 'px';
      wheel.style.height = Math.floor(size) + 'px';
      ctx.setTransform(1,0,0,1,0,0);
      ctx.scale(dpr, dpr);
      drawWheel(size);
    }

    const loadedImages = new Array(total);
    let toLoad = total;
    segments.forEach((s, i) => {
      const img = new Image();
      img.src = s.imageSrc;
      img.loading = 'eager';
      img.decoding = 'async';
      img.onload = img.onerror = () => {
        loadedImages[i] = img.complete ? img : null;
        if (--toLoad === 0) {
          resizeCanvas();
          requestAnimationFrame(autorotateFrame);
        }
      };
    });

    function drawWheel(pxSize) {
      const size = pxSize || parseFloat(getComputedStyle(wheel).width);
      const radius = size / 2;
      const cx = radius, cy = radius;

      ctx.clearRect(0, 0, wheel.width, wheel.height);

      for (let i = 0; i < total; i++) {
        const start = i * anglePer;
        const end = start + anglePer;

        ctx.save();
        ctx.beginPath();
        ctx.moveTo(cx, cy);
        ctx.arc(cx, cy, radius, start, end);
        ctx.closePath();
        ctx.clip();
        if (loadedImages[i]) {
          ctx.drawImage(loadedImages[i], cx - radius, cy - radius, radius * 2, radius * 2);
        } else {
          ctx.fillStyle = '#444';
          ctx.fillRect(0, 0, wheel.width, wheel.height);
        }
        ctx.restore();

        ctx.beginPath();
        ctx.moveTo(cx, cy);
        ctx.arc(cx, cy, radius, start, end);
        ctx.closePath();
        ctx.strokeStyle = '#fff';
        ctx.lineWidth = 2;
        ctx.stroke();

        ctx.save();
        ctx.translate(cx, cy);
        ctx.rotate(start + anglePer / 2);
        ctx.textAlign = 'right';
        ctx.textBaseline = 'middle';
        const fontSize = Math.max(14, radius * 0.07);
        ctx.font = '700 ' + fontSize + 'px system-ui, Arial';
        ctx.strokeStyle = 'rgba(0,0,0,.8)';
        ctx.lineWidth = 4;
        ctx.strokeText(segments[i].label, radius - 10, 0);
        ctx.fillStyle = '#fff';
        ctx.fillText(segments[i].label, radius - 10, 0);
        ctx.restore();
      }
      wheel.style.transform = `rotate(${currentRotation}rad)`;
    }

    function autorotateFrame() {
      if (autorun && !isSpinning && !prefersReduced) {
        currentRotation += 0.0035;
        wheel.style.transform = `rotate(${currentRotation}rad)`;
      }
      requestAnimationFrame(autorotateFrame);
    }

    function spin() {
      if (isSpinning) return;
      isSpinning = true;
      spinBtn.disabled = true;
      resultDiv.textContent = '';

      const spins = prefersReduced ? 0.5 : (Math.floor(Math.random() * 3) + 3);
      const randIndex = Math.floor(Math.random() * total);
      const offset = Math.random() * (anglePer - 0.0002) + 0.0001;
      const delta = spins * 2 * Math.PI + (randIndex * anglePer + offset);

      autorun = false;
      wheel.style.transition = prefersReduced ? 'transform .6s ease-out' : 'transform 8s cubic-bezier(0.33,1,0.68,1)';
      currentRotation += delta;
      wheel.style.transform = `rotate(${currentRotation}rad)`;

      const onEnd = () => {
        wheel.style.transition = 'none';
        let norm = currentRotation % (2 * Math.PI);
        if (norm < 0) norm += 2 * Math.PI;
        const raw = (-norm % (2 * Math.PI) + 2 * Math.PI) % (2 * Math.PI);
        const win = Math.floor(raw / anglePer) % total;
        const brand = segments[win].label;
        resultDiv.textContent = `🎉 Случайная БК: ${brand}`;
        openModalForBrand(brand);
        isSpinning = false;
        spinBtn.disabled = false;
        setTimeout(() => { autorun = !prefersReduced; }, 800);
        wheel.removeEventListener('transitionend', onEnd);
      };
      wheel.addEventListener('transitionend', onEnd);
    }

    spinBtn.addEventListener('click', spin);
    wheel.addEventListener('click', () => { if (!isSpinning) spin(); });

    window.addEventListener('resize', resizeCanvas, { passive: true });
    if (toLoad === 0) resizeCanvas();

    // ===== Banner clicks -> open promo =====
    document.querySelectorAll('.slide').forEach(slide => {
      slide.addEventListener('click', () => {
        const brand = slide.querySelector('.label')?.textContent.trim();
        if (brand) openModalForBrand(brand);
      });
    });
  </script>
</body>
</html>
